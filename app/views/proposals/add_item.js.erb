var $grid = $('.grid').masonry({
  columnWidth: '.grid-sizer',
  itemSelector: '.grid-item',
  percentPosition: true
});

var $item = $("<%= escape_javascript(render 'proposals/item_row', item: @item, :@account => @account, :@job => @job, :@proposal => @proposal) %>")

$grid.append($item)
  .masonry("appended", $item)

$(".new_item")[0].reset();

$(".remove-existing-item-button").click(function() {
  var itemId = this.dataset.itemId
  var proposalId = null
  $.ajax({
    url: '/items/' + itemId,
    type: "PUT",
    data: { item: {
      id: itemId, proposal_id: proposalId }
    }
  });
});
