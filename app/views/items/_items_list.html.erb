<div class="row">

  <% if current_user.try(:internal?) && !controller_name.in?(%w(mailer purchases)) %>
    <div class="text-right">
      <%= link_to "Print Labels", labels_items_url(by_id: items.map(&:id)), class: "btn btn-info btn-raised btn-round", target: "blank" %>
    </div>
  <% end %>

  <div class="table-responsive">
    <table class="table table-shopping tablesorter">

      <thead>
        <tr>
          <th class="text-center"></th>
          <th class="th-description text-center">Item</th>
          <% headers.each do |header| %>
            <th class="text-center"><%= header %></th>
          <% end %>
        </tr>
      </thead>

      <tbody>
        <% cache [items, controller_name, action_name, current_user.try(:role)] do %>
          <% items.each do |item| %>
            <% cache_if current_user.try(:internal?), [item, context, headers] do %>
              <%= render item, context: context, headers: headers %>
            <% end %>
          <% end %>
        <% end %>
      </tbody>

    </table>
  </div>

  <% unless controller_name.in?(%w(proposals agreements purchases search mailer accounts)) %>

    <div class="text-center">
      <% if items.present? %>
        <%= paginate items, params: params, html: {class: "pagination pagination-info"} %>
      <% end %>
    </div>

  <% end %>

</div>
