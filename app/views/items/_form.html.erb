<div class="row">
  <div class="col-xs-10 col-xs-offset-1 col-md-8 col-md-offset-2">
    <legend><%= legend %></legend>
    <% if item.errors.present? %>
      <div class="row">
        <div class="error_messages notice alert alert-danger text-center">
          <% item.errors.full_messages.each do |msg| %>
            <p><%= msg %></p>
          <% end %>
        </div>
      </div>
    <% end %>

    <%= hidden_field_tag :authenticity_token, form_authenticity_token %>

    <div class="row">
      <div class="col-xs-12 col-md-6">
        <div class="form-group label-floating">
          <%= f.label :description, class: "control-label required" %>
          <%= f.text_field :description, class: "form-control", required: true %>
        </div>
      </div>

      <div class="col-xs-12 col-md-6">
        <div class="form-group label-floating">
          <%= f.label :category, class: "control-label" %>
          <%= f.collection_select :category_id, @categories, :id, :name, {include_blank: true}, {class: "select form-control" } %>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-6">
        <div class="form-group label-floating">
          <%= f.label :account_item_number, "Item No.".html_safe, class: "control-label" %>
          <%= f.number_field :account_item_number, class: "form-control" %>
        </div>
      </div>

      <div class="col-xs-6">
        <div class="form-group label-floating">
          <%= f.label :condition, class: "control-label" %>
          <%= f.text_field :condition, class: "form-control" %>
        </div>
      </div>
    </div>

    <% if @item.initial_photos.present? %>
      <div class="row text-center large-top-margin grid">
        <div class="grid-sizer col-xs-12 col-sm-6 col-md-4"></div>
        <% @item.initial_photos.each do |photo| %>
          <div class="grid-item col-xs-12 col-sm-6 col-md-4" id="photo-<%= photo.id %>">
            <%= image_tag photo.photo_url(:thumb), class: "img-rounded" %>
            <%= link_to "<i class='material-icons'>delete_forever</i>".html_safe, "javascript:void(0)", method: :delete, class: "btn btn-fab btn-fab-mini btn-danger delete-button", data: { photo_id: photo.id } %>
          </div>
        <% end %>
      </div>
    <% end %>

    <div class="row form-row">
      <div class="dropzone-file-field">
        <%= f.label :initial_photos %>
        <%= f.file_field :initial_photos, multiple: true, class: "dropzone" %>
      </div>
    </div>

    <% if action_name == "edit" && controller_name == "items" %>

      <% if @item.listing_photos.present? %>
        <div class="row text-center large-top-margin grid">
          <div class="grid-sizer col-xs-12 col-sm-6 col-md-4"></div>
          <% @item.listing_photos.each do |photo| %>
            <div class="grid-item col-xs-12 col-sm-6 col-md-4">
              <%= image_tag photo.photo_url(:thumb), class: "img-rounded" %></br></br>
            </div>
          <% end %>
        </div>
      <% end %>

      <div class="row form-row">
        <div class="dropzone-file-field">
          <%= f.label :listing_photos %>
          <%= f.file_field :listing_photos, multiple: true, class: "dropzone" %>
        </div>
      </div>

      <div class="row form-row">

        <div class="col-xs-6 col-md-3 col-md-offset-3">
          <div class="row">
            <div class="form-group label-floating">
              <div class="input-group">
                <span class="input-group-addon">
                  <i class="fa fa-usd" aria-hidden="true"></i>
                </span>
                <%= f.label :listing_price, class: "control-label" %>
                <%= f.text_field :listing_price, class: "form-control" %>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xs-6 col-md-3">
          <div class="row">
            <div class="form-group label-floating">
              <div class="input-group">
                <span class="input-group-addon">
                  <i class="fa fa-usd" aria-hidden="true"></i>
                </span>
                <%= f.label :purchase_price, class: "control-label" %>
                <%= f.text_field :purchase_price, class: "form-control" %>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="row form-row">

        <div class="col-xs-6 col-md-3 col-md-offset-3">
          <div class="row">
            <div class="form-group label-floating">
              <div class="input-group">
                <span class="input-group-addon">
                  <i class="fa fa-usd" aria-hidden="true"></i>
                </span>
                <%= f.label :minimum_sale_price, class: "control-label" %>
                <%= f.text_field :minimum_sale_price, class: "form-control" %>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xs-6 col-md-3">
          <div class="row">
            <div class="form-group label-floating">
              <div class="input-group">
                <span class="input-group-addon">
                  <i class="fa fa-usd" aria-hidden="true"></i>
                </span>
                <%= f.label :sale_price, class: "control-label" %>
                <%= f.text_field :sale_price, class: "form-control" %>
              </div>
            </div>
          </div>
        </div>

      </div>

    <% end %>

    <div class="row form-row">
      <div class="actions">
        <div class="col-xs-12 text-center">
          <%= f.submit class: "btn btn-raised btn-primary" %>
        </div>
      </div>
    </div>
  </div>
</div>
